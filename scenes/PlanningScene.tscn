[gd_scene load_steps=44 format=3 uid="uid://tfksyvs2qbdu"]

[ext_resource type="Script" uid="uid://lntsseib6ktx" path="res://scripts/planning_scene.gd" id="1_i05ib"]
[ext_resource type="PackedScene" uid="uid://csr8qdvijf7o8" path="res://assets/HeistPlanner.tscn" id="2_sfq2c"]
[ext_resource type="Script" uid="uid://d0klmhrydubhb" path="res://scripts/game_manager.gd" id="3_pbho8"]
[ext_resource type="Script" uid="uid://dbq3ndy5purel" path="res://scripts/TuringBandUIManager.gd" id="7_1rttj"]
[ext_resource type="Script" uid="uid://bxcsx3v1tofol" path="res://scripts/bandlController.gd" id="8_0acuf"]
[ext_resource type="Texture2D" uid="uid://ccllpjpc2upk8" path="res://assets/sprites/keys/shift.png" id="8_01txo"]
[ext_resource type="PackedScene" uid="uid://blbae5xp247m5" path="res://assets/Map.tscn" id="8_rly6o"]
[ext_resource type="PackedScene" uid="uid://cb36gbar6tdv" path="res://assets/guard.tscn" id="9_0acuf"]
[ext_resource type="PackedScene" uid="uid://cxy4hikcjoxb7" path="res://assets/ui/turing_bandl_instruction_element_ui_scene.tscn" id="9_ec7cf"]
[ext_resource type="PackedScene" uid="uid://b44tvfhd3lcf1" path="res://assets/player.tscn" id="10_ec7cf"]
[ext_resource type="PackedScene" uid="uid://crkpn5vqe2wwa" path="res://assets/ui/chat.tscn" id="10_ibx1f"]
[ext_resource type="AudioStream" uid="uid://dpchh6yw6wdxn" path="res://assets/sounds/voicelines/tutorial/voiceline1.ogg" id="10_lxu5f"]
[ext_resource type="Script" uid="uid://bncnyql6noftg" path="res://scripts/tutorial_manager.gd" id="10_nivii"]
[ext_resource type="AudioStream" uid="uid://cwc3amyupydne" path="res://assets/sounds/voicelines/tutorial/voiceline2.ogg" id="11_ntchk"]
[ext_resource type="Script" uid="uid://emtjvummxi6o" path="res://scripts/guard_mover.gd" id="11_y7sd5"]
[ext_resource type="AudioStream" uid="uid://b5mmgknvk7eng" path="res://assets/sounds/voicelines/tutorial/voiceline3.ogg" id="12_jerq1"]
[ext_resource type="Script" uid="uid://der2d8iibxg75" path="res://scripts/planning_scene_player_controller.gd" id="12_y7sd5"]
[ext_resource type="AudioStream" uid="uid://il8nn1kyps6r" path="res://assets/sounds/voicelines/tutorial/voiceline4.ogg" id="13_m2q86"]
[ext_resource type="Texture2D" uid="uid://cwu2sxpm5by5h" path="res://assets/ui/planningscreenmap/map_in_lineart_scaled.png" id="13_un3xe"]
[ext_resource type="AudioStream" uid="uid://brfhrtwxt1nw" path="res://assets/sounds/voicelines/tutorial/voiceline5.ogg" id="14_kitgh"]
[ext_resource type="PackedScene" uid="uid://dsn1mnxuhm7jh" path="res://assets/GoalObject.tscn" id="14_un3xe"]
[ext_resource type="AudioStream" uid="uid://bd5g7tc1nufnr" path="res://assets/sounds/voicelines/tutorial/voiceline6.ogg" id="15_yivre"]
[ext_resource type="Script" uid="uid://cjqf4q1mwbr5e" path="res://scripts/place_walls.gd" id="16_ibx1f"]
[ext_resource type="AudioStream" uid="uid://c8hxsk8w5cdvs" path="res://assets/sounds/voicelines/tutorial/voiceline7.ogg" id="16_jlbm7"]
[ext_resource type="AudioStream" uid="uid://blr07d13c8auj" path="res://assets/sounds/voicelines/tutorial/voiceline8.ogg" id="17_ntchk"]
[ext_resource type="AudioStream" uid="uid://fro82uqsswa3" path="res://assets/sounds/voicelines/tutorial/voiceline9.ogg" id="17_yefry"]
[ext_resource type="AudioStream" uid="uid://dxm7vwhuaydcp" path="res://assets/sounds/voicelines/tutorial/voiceline10.ogg" id="18_ynj1n"]
[ext_resource type="AudioStream" uid="uid://c31bejwv0f251" path="res://assets/sounds/voicelines/tutorial/voiceline11.ogg" id="19_po8np"]
[ext_resource type="AudioStream" uid="uid://b5d5e7rvhi0lc" path="res://assets/sounds/voicelines/tutorial/voiceline12.ogg" id="20_w8kyp"]
[ext_resource type="AudioStream" uid="uid://dw7hakj4u6b6y" path="res://assets/sounds/voicelines/tutorial/voiceline13.ogg" id="21_nup1x"]
[ext_resource type="AudioStream" uid="uid://5dskxy82tsru" path="res://assets/sounds/voicelines/tutorial/voiceline14.ogg" id="22_b5yxx"]
[ext_resource type="Texture2D" uid="uid://bp4ut1tshuu0t" path="res://assets/sprites/Tutorial/skip.png" id="27_jlbm7"]
[ext_resource type="AudioStream" uid="uid://da1ct5vg5ohpk" path="res://assets/sounds/voicelines/tutorial/voiceline15.ogg" id="28_ynj1n"]
[ext_resource type="PackedScene" uid="uid://dj8ocoeajpxud" path="res://assets/pause_menu.tscn" id="29_yefry"]
[ext_resource type="Texture2D" uid="uid://bogsrnq6djf7d" path="res://assets/sprites/keys/enter.png" id="33_kitgh"]
[ext_resource type="Texture2D" uid="uid://dhpy1ykqcskhk" path="res://assets/sprites/keys/backspace.png" id="34_yivre"]
[ext_resource type="Texture2D" uid="uid://boa7jf3ocbkmv" path="res://assets/sprites/keys/arrow_keys.png" id="35_jlbm7"]
[ext_resource type="AudioStream" uid="uid://dgku8m2ydkvlt" path="res://assets/music/planning_theme.ogg" id="36_yivre"]
[ext_resource type="Texture2D" uid="uid://dsxfyk0txjm5a" path="res://assets/ui/planningscreenmap/getdia.png" id="38_yefry"]

[sub_resource type="Environment" id="Environment_1rttj"]
background_color = Color(0.0588235, 0.0588235, 0.0588235, 1)
background_energy_multiplier = 0.0
ambient_light_source = 2
ambient_light_energy = 0.0

[sub_resource type="LabelSettings" id="LabelSettings_yefry"]
font_size = 46

[sub_resource type="LabelSettings" id="LabelSettings_ibx1f"]
font_size = 48

[sub_resource type="LabelSettings" id="LabelSettings_r1aly"]
font_size = 36

[node name="PlanningScene" type="Node3D"]
script = ExtResource("1_i05ib")

[node name="Player" parent="." groups=["player"] instance=ExtResource("10_ec7cf")]
play_hop_sound = true

[node name="HeistPlanner" parent="." node_paths=PackedStringArray("player") instance=ExtResource("2_sfq2c")]
player = NodePath("../Player")

[node name="GameManager" type="Node" parent="." node_paths=PackedStringArray("player", "goal")]
script = ExtResource("3_pbho8")
player = NodePath("..")
goal = NodePath("../GoalObject")

[node name="DiaPostit" type="Sprite2D" parent="."]
position = Vector2(45, 125)
scale = Vector2(0.09, 0.09)

[node name="Camera3D" type="Camera3D" parent="."]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, 1, 0, -1, -4.37114e-08, -3.64, 7.594, -11.905)
environment = SubResource("Environment_1rttj")
projection = 1
fov = 50.0
size = 26.478

[node name="Hints" type="Control" parent="."]
layout_mode = 3
anchors_preset = 0
offset_right = 40.0
offset_bottom = 40.0

[node name="Panel" type="Panel" parent="Hints"]
layout_mode = 0
offset_left = 1251.0
offset_top = 636.0
offset_right = 1551.0
offset_bottom = 1080.0

[node name="Move" type="Label" parent="Hints/Panel"]
layout_mode = 0
offset_left = 140.0
offset_top = 22.0
offset_right = 817.0
offset_bottom = 371.0
text = "Plan"
label_settings = SubResource("LabelSettings_yefry")

[node name="ArrowKeysSprite" type="Sprite2D" parent="Hints/Panel/Move"]
position = Vector2(-70, 35)
scale = Vector2(0.125, 0.125)
texture = ExtResource("35_jlbm7")

[node name="Undo" type="Label" parent="Hints/Panel"]
layout_mode = 0
offset_left = 142.0
offset_top = 127.0
offset_right = 819.0
offset_bottom = 476.0
text = "Undo"
label_settings = SubResource("LabelSettings_yefry")

[node name="BackspaceSprite" type="Sprite2D" parent="Hints/Panel/Undo"]
position = Vector2(-70, 35)
scale = Vector2(0.125, 0.125)
texture = ExtResource("34_yivre")

[node name="Start" type="Label" parent="Hints/Panel"]
layout_mode = 0
offset_left = 147.0
offset_top = 237.0
offset_right = 824.0
offset_bottom = 586.0
text = "Start"
label_settings = SubResource("LabelSettings_yefry")

[node name="EnterSprite" type="Sprite2D" parent="Hints/Panel/Start"]
position = Vector2(-70, 35)
scale = Vector2(0.125, 0.125)
texture = ExtResource("33_kitgh")

[node name="Hide" type="Label" parent="Hints/Panel"]
layout_mode = 0
offset_left = 148.0
offset_top = 338.0
offset_right = 825.0
offset_bottom = 687.0
text = "Hide"
label_settings = SubResource("LabelSettings_yefry")

[node name="ArrowKeysSprite" type="Sprite2D" parent="Hints/Panel/Hide"]
position = Vector2(-70, 35)
scale = Vector2(0.125, 0.125)
texture = ExtResource("8_01txo")

[node name="TuringBandlUI" type="Control" parent="."]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
size_flags_horizontal = 3
size_flags_vertical = 3
script = ExtResource("7_1rttj")

[node name="Panel" type="Panel" parent="TuringBandlUI"]
layout_mode = 1
anchors_preset = 11
anchor_left = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = -372.0
grow_horizontal = 0
grow_vertical = 2

[node name="VBoxContainer" type="VBoxContainer" parent="TuringBandlUI/Panel" node_paths=PackedStringArray("bandl1", "bandl2", "bandl3", "bandl4")]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
size_flags_horizontal = 3
script = ExtResource("8_0acuf")
bandl1 = NodePath("TuringBandlInstruction")
bandl2 = NodePath("TuringBandlInstruction2")
bandl3 = NodePath("TuringBandlInstruction3")
bandl4 = NodePath("TuringBandlInstruction4")

[node name="TuringBandlInstruction" parent="TuringBandlUI/Panel/VBoxContainer" instance=ExtResource("9_ec7cf")]
layout_mode = 2

[node name="TuringBandlInstruction2" parent="TuringBandlUI/Panel/VBoxContainer" instance=ExtResource("9_ec7cf")]
layout_mode = 2

[node name="TuringBandlInstruction3" parent="TuringBandlUI/Panel/VBoxContainer" instance=ExtResource("9_ec7cf")]
layout_mode = 2

[node name="TuringBandlInstruction4" parent="TuringBandlUI/Panel/VBoxContainer" instance=ExtResource("9_ec7cf")]
layout_mode = 2

[node name="TutorialUI2" type="Control" parent="." node_paths=PackedStringArray("heist_planner", "movement_hint", "undo_hint", "start_hint", "hide_hint")]
visible = false
layout_mode = 3
anchors_preset = 0
script = ExtResource("10_nivii")
heist_planner = NodePath("../HeistPlanner")
movement_hint = NodePath("../Hints/Panel/Move")
undo_hint = NodePath("../Hints/Panel/Undo")
start_hint = NodePath("../Hints/Panel/Start")
hide_hint = NodePath("../Hints/Panel/Hide")

[node name="Chat" parent="TutorialUI2" instance=ExtResource("10_ibx1f")]
messages = Array[String](["I fulfilled my part of the bargain.
...", "The building plan and patrol routes are all yours.
...", "But this won't be easy. You'll have to come up with a foolproof plan."])
voicelines = Array[AudioStream]([ExtResource("10_lxu5f"), ExtResource("11_ntchk"), ExtResource("12_jerq1")])

[node name="Chat2" parent="TutorialUI2" instance=ExtResource("10_ibx1f")]
messages = Array[String](["But with my intel, this should be as easy as...", "... heh... stealing candy from a baby. Or stealing a gem from a museum.", "You can plan your heist using the arrow keys. Go ahead."])
voicelines = Array[AudioStream]([ExtResource("13_m2q86"), ExtResource("14_kitgh"), ExtResource("15_yivre")])

[node name="Chat3" parent="TutorialUI2" instance=ExtResource("10_ibx1f")]
messages = Array[String](["Splendid. On the right, you can see your move sequence.", "Don't let these guards see you. Unless you really like jail.", "If you're behind a corner when a guard walks by, you may be able to hide using shift."])
voicelines = Array[AudioStream]([ExtResource("16_jlbm7"), ExtResource("17_ntchk"), ExtResource("17_yefry")])

[node name="Chat4" parent="TutorialUI2" instance=ExtResource("10_ibx1f")]
messages = Array[String](["If you mess up your plan, you can always hit \"backspace\" to undo.", "If you're confident about your plan, hit enter.", "Then get in there, and steal that precious gem."])
voicelines = Array[AudioStream]([ExtResource("18_ynj1n"), ExtResource("19_po8np"), ExtResource("20_w8kyp")])

[node name="Chat5" parent="TutorialUI2" instance=ExtResource("10_ibx1f")]
messages = Array[String](["And remember...", "You owe me.", "I'm watching you."])
voicelines = Array[AudioStream]([ExtResource("21_nup1x"), ExtResource("22_b5yxx"), ExtResource("28_ynj1n")])
chat_icon = 1

[node name="Instructions" type="Label" parent="TutorialUI2"]
visible = false
layout_mode = 0
offset_left = -1.0
offset_top = 43.0
offset_right = 1913.0
offset_bottom = 110.0
text = "Use the arrow keys to plan your heist."
label_settings = SubResource("LabelSettings_ibx1f")
horizontal_alignment = 1

[node name="ColorRect" type="ColorRect" parent="TutorialUI2"]
layout_mode = 0
offset_left = 23.0
offset_top = 975.0
offset_right = 581.0
offset_bottom = 1055.0
color = Color(0.306923, 0.306923, 0.306923, 1)

[node name="SkipLabel" type="Label" parent="TutorialUI2"]
layout_mode = 0
offset_left = 141.0
offset_top = 989.0
offset_right = 562.0
offset_bottom = 1039.0
text = "Press \"X\" to skip tutorial"
label_settings = SubResource("LabelSettings_r1aly")

[node name="Sprite2D" type="Sprite2D" parent="TutorialUI2/SkipLabel"]
position = Vector2(-60, 25)
scale = Vector2(0.1, 0.1)
texture = ExtResource("27_jlbm7")

[node name="PauseMenu" parent="." instance=ExtResource("29_yefry")]

[node name="Map" parent="." instance=ExtResource("8_rly6o")]
transform = Transform3D(5, 0, 0, 0, 5, 0, 0, 0, 5, -16.5, 1.5, -19.5)
visible = false

[node name="MovementManager" type="Node" parent="."]

[node name="GuardMovementController" type="Node" parent="MovementManager" node_paths=PackedStringArray("guard_list")]
script = ExtResource("11_y7sd5")
guard_list = [NodePath("../../startingGumba"), NodePath("../../mainCircleGuard"), NodePath("../../redfloorGuard"), NodePath("../../randompillarroomguard"), NodePath("../../theFinalBoss")]

[node name="PlanningScenePlayerController" type="Node" parent="MovementManager" node_paths=PackedStringArray("player")]
script = ExtResource("12_y7sd5")
player = NodePath("../../Player")

[node name="Sprite3D" type="Sprite3D" parent="."]
transform = Transform3D(2.325, 0, 0, 0, -1.01629e-07, 2.325, 0, -2.325, -1.01629e-07, -11.955, -1.443, -11.964)
texture = ExtResource("13_un3xe")

[node name="GoalObject" parent="." instance=ExtResource("14_un3xe")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -25, 0, -22)

[node name="Walls" type="Node3D" parent="."]
visible = false
script = ExtResource("16_ibx1f")

[node name="AudioStreamPlayer" type="AudioStreamPlayer" parent="."]
stream = ExtResource("36_yivre")
volume_db = -10.0
autoplay = true
bus = &"Music"

[node name="DiamondSticker" type="Sprite3D" parent="."]
transform = Transform3D(1.2, 0, 0, 0, -5.24537e-08, 1.2, 0, -1.2, -5.24537e-08, -24.2727, 3.08171, -21.7178)
texture = ExtResource("38_yefry")

[node name="mainCircleGuard" parent="." instance=ExtResource("9_0acuf")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -20, 0, -7)
input_sequence = Array[int]([1, 1, 1, 2, 2, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 0, 0, 0, 3, 3, 3, 0, 0, 0, 0, 0, 0, 3, 3, 3, 3, 3, 0, 1, 3, 1, 1, 3, 1])
id = 1

[node name="redfloorGuard" parent="." instance=ExtResource("9_0acuf")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -24, 0, -6)
input_sequence = Array[int]([3, 3, 1, 2, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 0, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 3])
id = 2

[node name="randompillarroomguard" parent="." instance=ExtResource("9_0acuf")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -6, 0, -21)
input_sequence = Array[int]([1, 1, 1, 1, 1, 2, 2, 2, 2, 1, 1, 2, 2, 0, 0, 0, 0, 0, 0, 3, 3, 0, 0, 3, 3, 3, 3, 1])
id = 3

[node name="theFinalBoss" parent="." instance=ExtResource("9_0acuf")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -12, 0, -23)
input_sequence = Array[int]([3, 3, 3, 1, 3, 3, 0, 3, 3, 3, 1, 1, 2, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 0, 0, 0, 2, 2, 0, 0, 0, 3, 3, 3])
id = 4

[node name="startingGumba" parent="." instance=ExtResource("9_0acuf")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -7, 0, -2)
input_sequence = Array[int]([2, 2, 2, 2, 0, 2, 2, 2, 0, 0, 0, 0, 2, 2, 0, 0, 3, 3, 3, 2, 0, 0, 2, 2, 1, 1, 3, 3, 0, 0, 0, 0, 3, 3, 3, 0, 3, 3, 3, 1, 1, 3, 3, 3, 1, 1, 1, 2, 1, 1, 1, 3, 1, 1, 1, 1, 2, 2])
id = 5

[connection signal="load_game_board" from="." to="GameManager" method="_on_planning_scene_load_game_board"]
[connection signal="ready" from="Player" to="HeistPlanner" method="_on_player_ready"]
[connection signal="add_movement" from="HeistPlanner" to="TuringBandlUI" method="_on_heist_planner_add_movement"]
[connection signal="add_movement" from="HeistPlanner" to="MovementManager/PlanningScenePlayerController" method="_on_heist_planner_add_movement"]
[connection signal="heist_planned" from="HeistPlanner" to="." method="_on_heist_planner_heist_planned"]
[connection signal="heist_planned" from="HeistPlanner" to="MovementManager/PlanningScenePlayerController" method="_on_heist_planner_heist_planned"]
[connection signal="place_skull" from="HeistPlanner" to="MovementManager/PlanningScenePlayerController" method="_on_heist_planner_place_skull"]
[connection signal="remove_last_movement" from="HeistPlanner" to="TuringBandlUI" method="_on_heist_planner_remove_last_movement"]
[connection signal="remove_last_movement" from="HeistPlanner" to="MovementManager/PlanningScenePlayerController" method="_on_heist_planner_remove_last_movement"]
